(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=o.key,a=void 0,a=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(i,"string"),"symbol"===t(a)?a:String(a)),o)}var i,a}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,n,o;return r=t,o=[{key:"getAllCategories",value:function(){return(JSON.parse(localStorage.getItem("category"))||[]).sort((function(t,e){return new Date(t.createdAt)>new Date(e.createdAt)?-1:1}))}},{key:"saveCategory",value:function(e){var r=t.getAllCategories(),n=r.find((function(t){return t.title===e.title}));n?n.title=e.title:(e.id=(new Date).getTime(),e.createdAt=(new Date).toISOString(),r.push(e)),localStorage.setItem("category",JSON.stringify(r))}},{key:"getAllProducts",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"newest",e=JSON.parse(localStorage.getItem("products"))||[];return e.sort((function(e,r){return"newest"===t?new Date(e.createdAt)>new Date(r.createdAt)?-1:1:"oldest"===t?new Date(e.createdAt)>new Date(r.createdAt)?1:-1:void 0}))}},{key:"saveProducts",value:function(e){var r=t.getAllProducts(),n=r.find((function(t){return 1==t.id}));n?(n.title=e.title,n.category=e.selectedCategory,n.quantity=e.quantity,n.unit=e.checkedUnit,n.seller=e.seller,localStorage.setItem("products",JSON.stringify(n))):(e.id=(new Date).getTime(),e.createdAt=(new Date).toISOString(),r.push(e)),localStorage.setItem("products",JSON.stringify(r))}},{key:"deleteProduct",value:function(e){var r=t.getAllProducts().filter((function(t){return t.id!==parseInt(e)}));localStorage.setItem("products",JSON.stringify(r))}}],(n=null)&&e(r.prototype,n),o&&e(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}document.querySelector("#container");var i=document.querySelector("#category-name"),a=document.querySelector("#add-new-category"),c=document.querySelector("#cancel-add-new-category"),s=document.querySelector("#toggle-add-category"),l=document.querySelector("#add-category-section");const u=new(function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a.addEventListener("click",(function(t){return e.addNewCategory(t)})),c.addEventListener("click",(function(t){return e.closeAddCategorySection(t)})),s.addEventListener("click",(function(t){return e.toggleAddCategory(t)})),this.categories=[]}var e,n,u;return e=t,(n=[{key:"addNewCategory",value:function(t){t.preventDefault();var e=i.value;e?(r.saveCategory({title:e}),this.categories=r.getAllCategories(),this.createCategoriesList(),i.value="",this.closeAddCategorySection(t),this.showSnackbar("confirm","دسته بندی با موفقیت اضافه شد")):this.showSnackbar("error","نام دسته بندی را بنویسید")}},{key:"setApp",value:function(){this.categories=r.getAllCategories()}},{key:"createCategoriesList",value:function(){var t="";r.getAllCategories().length<1&&(t="<option>اضافه کنید</option>"),this.categories.forEach((function(e){t+='<option value="'.concat(e.id,'">').concat(e.title,"</option>")})),document.querySelector("#product-category").innerHTML=t}},{key:"toggleAddCategory",value:function(t){$(window).width()<1024&&(t.preventDefault(),l.classList.remove("opacity-0"),l.classList.add("h-[196px]"),l.classList.add("mb-4"),l.classList.add("lg:mb-6"),s.classList.add("translate-x-1300"))}},{key:"closeAddCategorySection",value:function(t){$(window).width()<1024&&(t.preventDefault(),i.value="",l.classList.add("opacity-0"),l.classList.remove("h-[196px]"),l.classList.add("h-0"),l.classList.remove("mb-4"),l.classList.remove("lg:mb-6"),s.classList.remove("translate-x-1300"))}},{key:"showSnackbar",value:function(t,e){var r="";"confirm"===t?r='\n      <div class="flex items-center gap-2 lg:gap-3">\n        <svg width="36" height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">\n          <path opacity="0.2" d="M24.285 3H11.715C6.255 3 3 6.255 3 11.715V24.27C3 29.745 6.255 33 11.715 33H24.27C29.73 33 32.985 29.745 32.985 24.285V11.715C33 6.255 29.745 3 24.285 3Z" fill="#4ADE80"/>\n          <path d="M15.8702 23.3699C15.5702 23.3699 15.2852 23.2499 15.0752 23.0399L10.8302 18.7949C10.3952 18.3599 10.3952 17.6399 10.8302 17.2049C11.2652 16.7699 11.9852 16.7699 12.4202 17.2049L15.8702 20.6549L23.5802 12.9449C24.0152 12.5099 24.7352 12.5099 25.1702 12.9449C25.6052 13.3799 25.6052 14.0999 25.1702 14.5349L16.6652 23.0399C16.4552 23.2499 16.1702 23.3699 15.8702 23.3699Z" fill="#4ADE80"/>\n        </svg>\n        <p>'.concat(e,'</p>\n      </div>\n      <svg id="close-snackbar" class="w-4 aspect-square cursor-pointer transition-all hover:scale-110" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">\n        <path d="M1 13L13 1" stroke="#707070" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n        <path d="M13 13L1 1" stroke="#707070" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>\n      '):"error"===t&&(r='\n      <div class="flex items-center gap-2 lg:gap-3">\n        <svg width="36" height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">\n          <path opacity="0.2" d="M24.285 3H11.715C6.255 3 3 6.255 3 11.715V24.27C3 29.745 6.255 33 11.715 33H24.27C29.73 33 32.985 29.745 32.985 24.285V11.715C33 6.255 29.745 3 24.285 3Z" fill="#F43F5E"/>\n          <path d="M19.5891 18L23.0391 14.55C23.4741 14.115 23.4741 13.395 23.0391 12.96C22.6041 12.525 21.8841 12.525 21.4491 12.96L17.9991 16.41L14.5491 12.96C14.1141 12.525 13.3941 12.525 12.9591 12.96C12.5241 13.395 12.5241 14.115 12.9591 14.55L16.4091 18L12.9591 21.45C12.5241 21.885 12.5241 22.605 12.9591 23.04C13.1841 23.265 13.4691 23.37 13.7541 23.37C14.0391 23.37 14.3241 23.265 14.5491 23.04L17.9991 19.59L21.4491 23.04C21.6741 23.265 21.9591 23.37 22.2441 23.37C22.5291 23.37 22.8141 23.265 23.0391 23.04C23.4741 22.605 23.4741 21.885 23.0391 21.45L19.5891 18Z" fill="#F43F5E"/>\n        </svg>      \n        <p>'.concat(e,'</p>\n      </div>\n      <svg id="close-snackbar" class="w-4 aspect-square cursor-pointer transition-all hover:scale-110" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">\n        <path d="M1 13L13 1" stroke="#707070" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n        <path d="M13 13L1 1" stroke="#707070" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>\n            '));var n=document.querySelector("#snackbar");n.innerHTML=r,n.classList.add("show"),document.querySelector("#close-snackbar").addEventListener("click",(function(){n.classList.remove("show")})),setTimeout((function(){n.classList.remove("show")}),3e3)}}])&&o(e.prototype,n),u&&o(e,u),Object.defineProperty(e,"prototype",{writable:!1}),t}());function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function p(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===d(i)?i:String(i)),n)}var o,i}var y=document.querySelector("#add-new-product"),g=document.querySelector("#edit-existed-product"),m=document.querySelector("#search-input"),h=document.querySelector("#sort-products"),w=document.querySelector("#product-name"),b=document.querySelector("#product-quantity"),k=document.querySelector("#radio-of-unit-packet"),S=document.querySelector("#radio-of-unit-kilugram"),L=document.querySelector("#product-category"),C=document.querySelector("#product-seller");const A=new(function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y.addEventListener("click",(function(t){return e.addNewProduct(t)})),m.addEventListener("input",(function(t){return e.searchProducts(t)})),h.addEventListener("change",(function(t){return e.sortProducts(t)})),this.products=[]}var e,n,o;return e=t,(n=[{key:"setApp",value:function(){this.products=r.getAllProducts()}},{key:"addNewProduct",value:function(t){t.preventDefault();var e=w.value,n=b.value,o=k,i=S,a="";o.checked?a=o.parentElement.innerText:i.checked&&(a=i.parentElement.innerText);var c=L.value,s=C.value;0!=n?e&&n&&c?(r.saveProducts({title:e,quantity:n,checkedUnit:a,selectedCategory:c,seller:s}),this.products=r.getAllProducts(),this.createProductsList(this.products),"add-new-product"!==t.target.id&&"add-new-product"!==t.target.parentElement.id||this.showSnackbar("confirm","محصول با موفقیت اضافه شد"),w.value="",b.value="",C.value=""):this.showSnackbar("error","همه فیلد های اجباری را پر کنید"):this.showSnackbar("error","مقدار نمی تواند برابر صفر باشد")}},{key:"createProductsList",value:function(t){var e=this,n="";t.forEach((function(t){var e=r.getAllCategories().find((function(e){return e.id==t.selectedCategory}));n+='\n      <tr class="flex items-center p-3 lg:p-5 flex-1 even:bg-primary-o20 product-list">\n      <td class="cursor-pointer edit-product">\n        <img src="./assets/images/edit.svg" alt="trash" data-id="'.concat(t.id,'" class="w-4 lg:w-6">\n      </td>\n      <td class="table-body">\n        <p class="truncate">').concat(t.title,'</p>\n      </td>\n      <td class="table-body">\n        <p class="truncate">').concat(e.title,'</p>\n      </td>\n      <td class="table-body">\n        <p class="truncate">').concat(t.quantity,' <span class="text-sm lg:text-xl">').concat(t.checkedUnit,'</span></p>\n      </td>\n      <td class="table-body">\n        <p class="truncate">').concat(new Date(t.createdAt).toLocaleDateString("fa-IR"),'</p>\n      </td>\n      <td class="cursor-pointer delete-product">\n        <img src="./assets/images/trash.svg" alt="trash" data-id="').concat(t.id,'" class="w-4 lg:w-6">\n      </td>\n    </tr>\n      ')})),this.products.length<1&&(n='<div class="text-sm lg:text-xl my-3 lg:my-6">درحال حاضر محصولی وجود ندارد</div>'),document.querySelector("#products-list").innerHTML=n,p(document.querySelectorAll(".delete-product")).forEach((function(t){t.addEventListener("click",(function(t){return e.deleteProducts(t)}))})),p(document.querySelectorAll(".edit-product")).forEach((function(t){t.addEventListener("click",(function(t){return e.editProducts(t)}))}))}},{key:"searchProducts",value:function(t){var e=t.target.value.trim(),r=this.products.filter((function(t){return t.title.includes(e)}));this.createProductsList(r)}},{key:"sortProducts",value:function(t){var e=t.target.value;this.products=r.getAllProducts(e),this.createProductsList(this.products)}},{key:"deleteProducts",value:function(t){var e=t.target.dataset.id;r.deleteProduct(e),this.products=r.getAllProducts(),this.createProductsList(this.products)}},{key:"editProducts",value:function(t){var e=this,n=t.target.dataset.id,o=this.products.find((function(t){return t.id==n})),i=r.getAllCategories().find((function(t){return t.id==o.selectedCategory}));w.value=o.title,b.value=o.quantity,C.value=o.seller;var a=p(L.getElementsByTagName("option"));a.forEach((function(t){return t.removeAttribute("selected")})),a.find((function(t){return t.innerText==i.title})).setAttribute("selected","selected"),k.removeAttribute("checked"),S.removeAttribute("checked");var c=p(document.querySelector("#units-wrapper").getElementsByTagName("label"));p(c.find((function(t){return t.innerText==o.checkedUnit})).children)[0].setAttribute("checked","checked"),y.classList.add("hidden"),g.classList.remove("hidden"),g.addEventListener("click",(function(t){t.preventDefault(),document.querySelector("#snackbar").classList.remove("show"),0!=b.value?(e.addNewProduct(t),r.deleteProduct(n),e.products=r.getAllProducts(),e.createProductsList(e.products),y.classList.remove("hidden"),g.classList.add("hidden"),e.showSnackbar("confirm","تغییرات با موفقیت ذخیره شد")):e.showSnackbar("zeroQuantity")}))}},{key:"showSnackbar",value:function(t,e){var r=document.querySelector("#snackbar"),n="";"confirm"===t?n='\n      <div class="flex items-center gap-2 lg:gap-3">\n        <svg width="36" height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">\n          <path opacity="0.2" d="M24.285 3H11.715C6.255 3 3 6.255 3 11.715V24.27C3 29.745 6.255 33 11.715 33H24.27C29.73 33 32.985 29.745 32.985 24.285V11.715C33 6.255 29.745 3 24.285 3Z" fill="#4ADE80"/>\n          <path d="M15.8702 23.3699C15.5702 23.3699 15.2852 23.2499 15.0752 23.0399L10.8302 18.7949C10.3952 18.3599 10.3952 17.6399 10.8302 17.2049C11.2652 16.7699 11.9852 16.7699 12.4202 17.2049L15.8702 20.6549L23.5802 12.9449C24.0152 12.5099 24.7352 12.5099 25.1702 12.9449C25.6052 13.3799 25.6052 14.0999 25.1702 14.5349L16.6652 23.0399C16.4552 23.2499 16.1702 23.3699 15.8702 23.3699Z" fill="#4ADE80"/>\n        </svg>\n        <p>'.concat(e,'</p>\n      </div>\n      <svg id="close-snackbar" class="w-4 aspect-square cursor-pointer transition-all hover:scale-110" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">\n        <path d="M1 13L13 1" stroke="#707070" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n        <path d="M13 13L1 1" stroke="#707070" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>\n      '):"error"===t&&(n='\n      <div class="flex items-center gap-2 lg:gap-3">\n        <svg width="36" height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">\n          <path opacity="0.2" d="M24.285 3H11.715C6.255 3 3 6.255 3 11.715V24.27C3 29.745 6.255 33 11.715 33H24.27C29.73 33 32.985 29.745 32.985 24.285V11.715C33 6.255 29.745 3 24.285 3Z" fill="#F43F5E"/>\n          <path d="M19.5891 18L23.0391 14.55C23.4741 14.115 23.4741 13.395 23.0391 12.96C22.6041 12.525 21.8841 12.525 21.4491 12.96L17.9991 16.41L14.5491 12.96C14.1141 12.525 13.3941 12.525 12.9591 12.96C12.5241 13.395 12.5241 14.115 12.9591 14.55L16.4091 18L12.9591 21.45C12.5241 21.885 12.5241 22.605 12.9591 23.04C13.1841 23.265 13.4691 23.37 13.7541 23.37C14.0391 23.37 14.3241 23.265 14.5491 23.04L17.9991 19.59L21.4491 23.04C21.6741 23.265 21.9591 23.37 22.2441 23.37C22.5291 23.37 22.8141 23.265 23.0391 23.04C23.4741 22.605 23.4741 21.885 23.0391 21.45L19.5891 18Z" fill="#F43F5E"/>\n        </svg>      \n        <p>'.concat(e,'</p>\n      </div>\n      <svg id="close-snackbar" class="w-4 aspect-square cursor-pointer transition-all hover:scale-110" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">\n        <path d="M1 13L13 1" stroke="#707070" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n        <path d="M13 13L1 1" stroke="#707070" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>\n            ')),r.innerHTML=n,setTimeout((function(){r.classList.add("show")}),500);var o=!1;document.querySelector("#close-snackbar").addEventListener("click",(function(){r.classList.remove("show"),o=!0})),!1===o&&setTimeout((function(){r.classList.remove("show")}),3e3)}}])&&v(e.prototype,n),o&&v(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}());document.addEventListener("DOMContentLoaded",(function(){u.setApp(),A.setApp(),u.createCategoriesList(),A.createProductsList(A.products)})),window.addEventListener("resize",(function(){var t=.01*window.innerHeight;document.querySelector("#container").style.setProperty("--vh","".concat(t,"px"))})),window.onload=function(){document.querySelector("#loading").style.display="none",document.querySelector("#container").style.display="flex"}})();