(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(a=o.key,c=void 0,c=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===e(c)?c:String(c)),o)}var a,c}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n,o;return r=e,o=[{key:"getAllCategories",value:function(){return(JSON.parse(localStorage.getItem("category"))||[]).sort((function(e,t){return new Date(e.createdAt)>new Date(t.createdAt)?-1:1}))}},{key:"saveCategory",value:function(t){var r=e.getAllCategories(),n=r.find((function(e){return e.title===t.title}));n?n.title=t.title:(t.id=(new Date).getTime(),t.createdAt=(new Date).toISOString(),r.push(t)),localStorage.setItem("category",JSON.stringify(r))}},{key:"getAllProducts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"newest",t=JSON.parse(localStorage.getItem("products"))||[];return t.sort((function(t,r){return"newest"===e?new Date(t.createdAt)>new Date(r.createdAt)?-1:1:"oldest"===e?new Date(t.createdAt)>new Date(r.createdAt)?1:-1:void 0}))}},{key:"saveProducts",value:function(t){var r=e.getAllProducts(),n=r.find((function(e){return 1==e.id}));n?(n.title=t.title,n.category=t.selectedCategory,n.quantity=t.quantity,n.unit=t.checkedUnit,n.seller=t.seller,localStorage.setItem("products",JSON.stringify(n))):(t.id=(new Date).getTime(),t.createdAt=(new Date).toISOString(),r.push(t)),localStorage.setItem("products",JSON.stringify(r))}},{key:"deleteProduct",value:function(t){var r=e.getAllProducts().filter((function(e){return e.id!==parseInt(t)}));localStorage.setItem("products",JSON.stringify(r))}}],(n=null)&&t(r.prototype,n),o&&t(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(a=o.key,c=void 0,c=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===n(c)?c:String(c)),o)}var a,c}document.querySelector("#container");var a=document.querySelector("#category-name"),c=document.querySelector("#add-new-category"),i=document.querySelector("#cancel-add-new-category"),s=document.querySelector("#toggle-add-category"),l=document.querySelector("#add-category-section");const u=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c.addEventListener("click",(function(e){return t.addNewCategory(e)})),i.addEventListener("click",(function(e){return t.closeAddCategorySection(e)})),s.addEventListener("click",(function(e){return t.toggleAddCategory(e)})),this.categories=[]}var t,n,u;return t=e,(n=[{key:"addNewCategory",value:function(e){e.preventDefault();var t=a.value;t?(r.saveCategory({title:t}),this.categories=r.getAllCategories(),this.createCategoriesList(),a.value="",this.closeAddCategorySection(e),this.showSnackbar("validCategory")):this.showSnackbar("invalidCategory")}},{key:"setApp",value:function(){this.categories=r.getAllCategories()}},{key:"createCategoriesList",value:function(){var e="";r.getAllCategories().length<1&&(e="<option>اضافه کنید</option>"),this.categories.forEach((function(t){e+='<option value="'.concat(t.id,'">').concat(t.title,"</option>")})),document.querySelector("#product-category").innerHTML=e}},{key:"toggleAddCategory",value:function(e){$(window).width()<1024&&(e.preventDefault(),l.classList.remove("opacity-0"),l.classList.add("h-[196px]"),l.classList.add("mb-4"),l.classList.add("lg:mb-6"),s.classList.add("translate-x-1300"))}},{key:"closeAddCategorySection",value:function(e){$(window).width()<1024&&(e.preventDefault(),a.value="",l.classList.add("opacity-0"),l.classList.remove("h-[196px]"),l.classList.add("h-0"),l.classList.remove("mb-4"),l.classList.remove("lg:mb-6"),s.classList.remove("translate-x-1300"))}},{key:"showSnackbar",value:function(e){var t="";"validCategory"===e?t='\n      <div class="flex items-center gap-2 lg:gap-3">\n      <img src="./assets/images/tick.svg" alt="Tick">\n          <p class="">دسته بندی با موفقیت اضافه شد</p>\n        </div>\n        <img src="./assets/images/close-1.svg" alt="close" id="close-snackbar"\n          class="w-4 cursor-pointer transition-all hover:scale-110">\n          ':"invalidCategory"===e&&(t='\n      <div class="flex items-center gap-2 lg:gap-3">\n          <img src="./assets/images/close-square.svg" alt="Close">\n          <p class="">نام دسته بندی را بنویسید</p>\n          </div>\n          <img src="./assets/images/close-1.svg" alt="close" id="close-snackbar"\n          class="w-4 cursor-pointer transition-all hover:scale-110">\n      ');var r=document.querySelector("#snackbar");r.innerHTML=t,r.classList.add("show"),document.querySelector("#close-snackbar").addEventListener("click",(function(){r.classList.remove("show")})),setTimeout((function(){r.classList.remove("show")}),3e3)}}])&&o(t.prototype,n),u&&o(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}());function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===d(a)?a:String(a)),n)}var o,a}var g=document.querySelector("#add-new-product"),p=document.querySelector("#edit-existed-product"),m=document.querySelector("#search-input"),h=document.querySelector("#sort-products"),b=document.querySelector("#product-name"),S=document.querySelector("#product-quantity"),w=document.querySelector("#radio-of-unit-packet"),k=document.querySelector("#radio-of-unit-kilugram"),L=document.querySelector("#product-category"),P=document.querySelector("#product-seller");const A=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g.addEventListener("click",(function(e){return t.addNewProduct(e)})),m.addEventListener("input",(function(e){return t.searchProducts(e)})),h.addEventListener("change",(function(e){return t.sortProducts(e)})),this.products=[]}var t,n,o;return t=e,(n=[{key:"setApp",value:function(){this.products=r.getAllProducts()}},{key:"addNewProduct",value:function(e){e.preventDefault();var t=b.value,n=S.value,o=w,a=k,c="";o.checked?c=o.parentElement.innerText:a.checked&&(c=a.parentElement.innerText);var i=L.value,s=P.value;t&&n&&i?(r.saveProducts({title:t,quantity:n,checkedUnit:c,selectedCategory:i,seller:s}),this.products=r.getAllProducts(),this.createProductsList(this.products),"add-new-product"!==e.target.id&&"add-new-product"!==e.target.parentElement.id||this.showSnackbar("validProduct"),b.value="",S.value="",P.value=""):this.showSnackbar("invalidProduct")}},{key:"createProductsList",value:function(e){var t=this,n="";e.forEach((function(e){var t=r.getAllCategories().find((function(t){return t.id==e.selectedCategory}));n+='\n      <tr class="flex items-center p-3 lg:p-5 flex-1 even:bg-primary-o20 product-list">\n      <td class="cursor-pointer edit-product">\n        <img src="./assets/images/edit.svg" alt="trash" data-id="'.concat(e.id,'" class="w-4 lg:w-6">\n      </td>\n      <td class="table-body">\n        <p class="truncate">').concat(e.title,'</p>\n      </td>\n      <td class="table-body">\n        <p class="truncate">').concat(t.title,'</p>\n      </td>\n      <td class="table-body">\n        <p class="truncate">').concat(e.quantity,' <span class="text-sm lg:text-xl">').concat(e.checkedUnit,'</span></p>\n      </td>\n      <td class="table-body">\n        <p class="truncate">').concat(new Date(e.createdAt).toLocaleDateString("fa-IR"),'</p>\n      </td>\n      <td class="cursor-pointer delete-product">\n        <img src="./assets/images/trash.svg" alt="trash" data-id="').concat(e.id,'" class="w-4 lg:w-6">\n      </td>\n    </tr>\n      ')})),this.products.length<1&&(n='<div class="text-sm lg:text-xl my-3 lg:my-6">درحال حاضر محصولی وجود ندارد</div>'),document.querySelector("#products-list").innerHTML=n,f(document.querySelectorAll(".delete-product")).forEach((function(e){e.addEventListener("click",(function(e){return t.deleteProducts(e)}))})),f(document.querySelectorAll(".edit-product")).forEach((function(e){e.addEventListener("click",(function(e){return t.editProducts(e)}))}))}},{key:"searchProducts",value:function(e){var t=e.target.value.trim(),r=this.products.filter((function(e){return e.title.includes(t)}));this.createProductsList(r)}},{key:"sortProducts",value:function(e){var t=e.target.value;this.products=r.getAllProducts(t),this.createProductsList(this.products)}},{key:"deleteProducts",value:function(e){var t=e.target.dataset.id;r.deleteProduct(t),this.products=r.getAllProducts(),this.createProductsList(this.products)}},{key:"editProducts",value:function(e){var t=this,n=e.target.dataset.id,o=this.products.find((function(e){return e.id==n})),a=r.getAllCategories().find((function(e){return e.id==o.selectedCategory}));b.value=o.title,S.value=o.quantity,P.value=o.seller;var c=f(L.getElementsByTagName("option"));c.forEach((function(e){return e.removeAttribute("selected")})),c.find((function(e){return e.innerText==a.title})).setAttribute("selected","selected"),w.removeAttribute("checked"),k.removeAttribute("checked");var i=f(document.querySelector("#units-wrapper").getElementsByTagName("label"));f(i.find((function(e){return e.innerText==o.checkedUnit})).children)[0].setAttribute("checked","checked"),g.classList.add("hidden"),p.classList.remove("hidden"),p.addEventListener("click",(function(e){e.preventDefault(),r.deleteProduct(n),t.addNewProduct(e),t.products=r.getAllProducts(),t.createProductsList(t.products),g.classList.remove("hidden"),p.classList.add("hidden"),t.showSnackbar("editedProduct")}))}},{key:"showSnackbar",value:function(e){var t="";"validProduct"===e?t='\n      <div class="flex items-center gap-2 lg:gap-3">\n      <img src="./assets/images/tick.svg" alt="Tick">\n          <p class="">محصول با موفقیت اضافه شد</p>\n        </div>\n        <img src="./assets/images/close-1.svg" alt="close" id="close-snackbar"\n          class="w-4 cursor-pointer transition-all hover:scale-110">\n          ':"editedProduct"===e?t='\n      <div class="flex items-center gap-2 lg:gap-3">\n      <img src="./assets/images/tick.svg" alt="Tick">\n      <p class="">تغییرات با موفقیت ذخیره شد</p>\n        </div>\n        <img src="./assets/images/close-1.svg" alt="close" id="close-snackbar"\n          class="w-4 cursor-pointer transition-all hover:scale-110">\n          ':"invalidProduct"===e&&(t='\n      <div class="flex items-center gap-2 lg:gap-3">\n          <img src="./assets/images/close-square.svg" alt="Close">\n          <p class="">همه فیلد های اجباری را پر کنید</p>\n          </div>\n          <img src="./assets/images/close-1.svg" alt="close" id="close-snackbar"\n          class="w-4 cursor-pointer transition-all hover:scale-110">\n      ');var r=document.querySelector("#snackbar");r.innerHTML=t,r.classList.add("show"),document.querySelector("#close-snackbar").addEventListener("click",(function(){r.classList.remove("show")})),setTimeout((function(){r.classList.remove("show")}),3e3)}}])&&y(t.prototype,n),o&&y(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}());document.addEventListener("DOMContentLoaded",(function(){u.setApp(),A.setApp(),u.createCategoriesList(),A.createProductsList(A.products)})),window.addEventListener("resize",(function(){var e=.01*window.innerHeight;document.querySelector("#container").style.setProperty("--vh","".concat(e,"px"))})),window.onload=function(){document.querySelector("#loading").style.display="none",document.querySelector("#container").style.display="flex"}})();